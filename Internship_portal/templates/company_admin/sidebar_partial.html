<!-- Sidebar -->
<style>
    .glass {
        background: rgba(255, 255, 255, 0.8) !important;
        backdrop-filter: blur(12px) !important;
        -webkit-backdrop-filter: blur(12px) !important;
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
    }

    .sidebar-transition {
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .sidebar-hidden {
        transform: translateX(-110%);
        opacity: 0;
        pointer-events: none;
    }

    .sidebar-visible {
        transform: translateX(0);
        opacity: 1 !important;
        pointer-events: auto !important;
    }
</style>

<div id="sidebar"
    class="fixed top-0 left-0 h-full w-80 bg-white shadow-2xl z-[9999] sidebar-transition sidebar-hidden glass">
    <div class="p-8">
        <div class="flex justify-between items-center mb-10">
            <h2 class="text-2xl font-black text-indigo-900 italic">ADMIN <span class="text-orange-500">PROFILE</span>
            </h2>
            <button onclick="toggleSidebar()" class="text-indigo-900 hover:text-orange-500 transition">
                <i class="fas fa-times text-2xl"></i>
            </button>
        </div>

        <div class="flex flex-col items-center mb-8">
            {% if current_user.profile_pic %}
            <img src="{{ url_for('static', filename='uploads/images/' + current_user.profile_pic) }}" alt="Profile"
                class="w-24 h-24 rounded-full object-cover mb-4 shadow-lg border-4 border-indigo-600">
            {% else %}
            <div
                class="w-24 h-24 bg-indigo-600 rounded-full flex items-center justify-center text-white text-3xl font-bold mb-4 shadow-lg">
                {{ current_user.username[0] | upper if current_user.username else 'A' }}
            </div>
            {% endif %}
            <h3 class="text-xl font-bold text-indigo-900">{{ current_user.username }}</h3>
            <p class="text-sm text-gray-500">{{ current_user.email }}</p>
            <span
                class="mt-2 px-3 py-1 bg-indigo-100 text-indigo-600 rounded-full text-[10px] font-black uppercase tracking-widest">
                {{ current_user.role | replace('_', ' ') if current_user.role else 'Admin' }}
            </span>
        </div>

        <nav class="space-y-4">
            <a href="{{ url_for('company_dashboard') }}"
                class="flex items-center gap-4 p-4 rounded-2xl bg-indigo-600 text-white font-bold shadow-indigo-200 shadow-xl transition">
                <i class="fas fa-th-large w-6"></i> Dashboard
            </a>
            <a href="{{ url_for('company_profile') }}"
                class="flex items-center gap-4 p-4 rounded-2xl text-indigo-900 hover:bg-indigo-50 font-bold transition">
                <i class="fas fa-user-circle w-6"></i> Profile Settings
            </a>
            <a href="/logout"
                class="flex items-center gap-4 p-4 rounded-2xl text-red-500 hover:bg-red-50 font-bold transition">
                <i class="fas fa-sign-out-alt w-6"></i> Logout
            </a>
        </nav>
    </div>
</div>

<!-- Overlay -->
<div id="overlay" onclick="toggleSidebar()"
    class="fixed inset-0 bg-black/40 backdrop-blur-sm z-[9998] hidden opacity-0 transition-opacity duration-300"></div>

<script>
    function toggleSidebar() {
        console.log("Toggle sidebar clicked");
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');

        if (!sidebar || !overlay) {
            console.error("Sidebar or Overlay not found");
            return;
        }

        if (sidebar.classList.contains('sidebar-hidden')) {
            console.log("Opening sidebar");
            sidebar.classList.remove('sidebar-hidden');
            sidebar.classList.add('sidebar-visible');
            overlay.classList.remove('hidden');
            setTimeout(() => overlay.classList.add('opacity-100'), 10);
        } else {
            console.log("Closing sidebar");
            sidebar.classList.add('sidebar-hidden');
            sidebar.classList.remove('sidebar-visible');
            overlay.classList.remove('opacity-100');
            setTimeout(() => overlay.classList.add('hidden'), 300);
        }
    }
</script>